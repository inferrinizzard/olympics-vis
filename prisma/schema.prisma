generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Country {
  country String @id @db.VarChar(3)
  name    String @db.VarChar(50)
  flag    String

  country_medals CountryMedals[]
  medal_totals   MedalTotals?

  @@map("country_detail")
}

model CountryAttendance {
  id               Int    @id @default(autoincrement())
  game             String @db.VarChar(30)
  country_athletes Json   @db.Json

  games_detail Games @relation(fields: [game], references: [game], onDelete: NoAction, onUpdate: NoAction, map: "fk_country_attendance_game")

  @@map("country_attendance")
}

model CountryMedals {
  id      Int    @id @default(autoincrement())
  country String @db.VarChar(3)
  game    String @db.VarChar(30)
  gold    Int    @default(0)
  silver  Int    @default(0)
  bronze  Int    @default(0)
  total   Int    @default(0)

  country_detail Country @relation(fields: [country], references: [country], onDelete: NoAction, onUpdate: NoAction, map: "fk_country_medals_country")
  games_detail   Games   @relation(fields: [game], references: [game], onDelete: NoAction, onUpdate: NoAction, map: "fk_country_medals_game")

  @@map("country_medals")
}

model Games {
  game         String @id @db.VarChar(30)
  year         Int
  season       String @db.VarChar(6)
  title        String @db.VarChar(30)
  emblem       String
  host         String @db.VarChar(100)
  num_athletes Int
  start_date   String @db.VarChar(20)
  end_date     String @db.VarChar(20)

  country_attendance CountryAttendance[]
  country_medals     CountryMedals[]
  sports_events      SportsEvent[]

  @@map("games_detail")
}

model MedalTotals {
  country String @id @db.VarChar(3)
  season  String @db.VarChar(6)
  gold    Int    @default(0)
  silver  Int    @default(0)
  bronze  Int    @default(0)
  total   Int    @default(0)

  country_detail Country @relation(fields: [country], references: [country], onDelete: NoAction, onUpdate: NoAction, map: "fk_medal_totals_country")

  @@map("medals_totals")
}

model Sport {
  sport String @id @db.VarChar(3)
  name  String @db.VarChar(50)
  icon  String

  @@map("sports_detail")
}

model SportsEvent {
  id     Int    @id @default(autoincrement())
  game   String @db.VarChar(30)
  sport  String @db.VarChar(3)
  events Json   @db.Json

  games_detail Games @relation(fields: [game], references: [game], onDelete: NoAction, onUpdate: NoAction, map: "fk_sports_events_game")

  @@map("sports_events")
}
